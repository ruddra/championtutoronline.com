{% load staticfiles %}

<link rel="stylesheet" type="text/css" href="{% static "jquery.easyui-1.4.2/themes/black/easyui.css" %}"/>
<script type="text/javascript" src="{% static "jquery.easyui-1.4.2/jquery.min.js" %}"></script>
<script type="text/javascript" src="{% static "jquery.easyui-1.4.2/jquery.easyui.min.js" %}"></script>

<script type='text/javascript'>
org = { mathdox:{formulaeditor:{options:{dragPalette:false, paletteShow: "none", useBar:false}}}};
</script>
<script type='text/javascript' src="{% static "js/mathdox/org/mathdox/formulaeditor/main.js" %}">
</script>

<div class="canvas_menu">
<div class="canvas_menu_icon">
<div class="canvas_menu_inner">
    <div  id="id_canvas_add_button" style="text-align:center;cursor:pointer;color: white;"> <img src="{% static "images/blue_pls.png" %}" width="26" height="20" alt="img">
    <br/><label>New Board</label></div>
</div>
<div class="canvas_menu_inner">
    <a  id="id_canvas_menu_icon_undo" href="#"> <img src="{% static "images/wb_menu_icon1.png" %}" width="26" height="20" alt="img"> </a>
</div>
<div class="canvas_menu_inner">
    <a id="id_canvas_menu_icon_redo" href="#"> <img src="{% static "images/wb_menu_icon2.png" %}" width="26" height="20" alt="img"> </a>
</div>
<div class="canvas_menu_inner">
    <a id="id_canvas_menu_icon_select" href="#"> <img src="{% static "images/wb_menu_icon3.png" %}" width="21" height="21" alt="img"> </a>
</div>
<div class="canvas_menu_inner">
    <a href="#"> <img src="{% static "images/wb_menu_icon4.png" %}" width="20" height="20" alt="img"> </a>
    <div class="wb_submenu_icon1">
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_pen_size5" href="#"> <img src="{% static "images/white_board/wb_menu_icon4_1.png" %}" width="30" height="26" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_pen_size10" href="#"> <img src="{% static "images/white_board/wb_menu_icon4_2.png" %}" width="30" height="26" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_pen_size15" href="#"> <img src="{% static "images/white_board/wb_menu_icon4_3.png" %}" width="30" height="26" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_pen_size20" href="#"> <img src="{% static "images/white_board/wb_menu_icon4_4.png" %}" width="30" height="26" alt="img"> </a> </div>
    </div>
</div>
<div class="canvas_menu_inner">
    <a href="#"> <img src="{% static "images/wb_menu_icon5.png" %}" width="22" height="20" alt="img"> </a>
    <div class="wb_submenu_icon1">
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_eraser_size5" href="#"> <img src="{% static "images/white_board/wb_menu_icon4_1.png" %}" width="30" height="26" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_eraser_size10" href="#"> <img src="{% static "images/white_board/wb_menu_icon4_2.png" %}" width="30" height="26" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_eraser_size15" href="#"> <img src="{% static "images/white_board/wb_menu_icon4_3.png" %}" width="30" height="26" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_eraser_size20" href="#"> <img src="{% static "images/white_board/wb_menu_icon4_4.png" %}" width="30" height="26" alt="img"> </a> </div>
    </div>
</div>
<div class="canvas_menu_inner">
    <a href="#"> <img src="{% static "images/wb_menu_icon6.png" %}" width="40" height="21" alt="img"> </a>
    <div class="wb_submenu_icon1">
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_brush_size5" href="#"> <img src="{% static "images/white_board/wb_menu_icon4_1.png" %}" width="30" height="26" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_brush_size10" href="#"> <img src="{% static "images/white_board/wb_menu_icon4_2.png" %}" width="30" height="26" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_brush_size15" href="#"> <img src="{% static "images/white_board/wb_menu_icon4_3.png" %}" width="30" height="26" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_brush_size20" href="#"> <img src="{% static "images/white_board/wb_menu_icon4_4.png" %}" width="30" height="26" alt="img"> </a> </div>
    </div>
</div>
<div class="canvas_menu_inner">
    <a href="#"> <img src="{% static "images/wb_menu_icon7.png" %}" width="27" height="26" alt="img"> </a>
    <div class="wb_submenu_icon1">
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_shape_circle" href="#"> <img src="{% static "images/white_board/wb_menu_icon7_1.png" %}" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_shape_hexa" href="#"> <img src="{% static "images/white_board/wb_menu_icon7_2.png" %}" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_shape_penta" href="#"> <img src="{% static "images/white_board/wb_menu_icon7_3.png" %}" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_shape_rect" href="#"> <img src="{% static "images/white_board/wb_menu_icon7_4.png" %}" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_shape_triangle" href="#"> <img src="{% static "images/white_board/wb_menu_icon7_5.png" %}" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_shape_righttriangle" href="#"> <img src="{% static "images/white_board/wb_menu_icon7_6.png" %}" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_shape_line" href="#"> <img src="{% static "images/white_board/wb_menu_icon7_7.png" %}" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_shape_arrow1" href="#"> <img src="{% static "images/white_board/wb_menu_icon7_8.png" %}" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_shape_arrow2" href="#"> <img src="{% static "images/white_board/wb_menu_icon7_9.png" %}" alt="img"> </a> </div>
    </div>
</div>
<div class="canvas_menu_inner">
    <a id="id_canvas_menu_icon_text" href="#"> <img src="{% static "images/wb_menu_icon8.png" %}" width="22" height="23" alt="img"> </a>
    <div class="wb_submenu_icon"></div>
</div>
<div class="canvas_menu_inner">
    <a id="id_canvas_menu_icon_clearboard" href="#"> <img src="{% static "images/wb_menu_icon9.png" %}" width="24" height="20" alt="img"> </a>
    <div class="wb_submenu_icon"></div>
</div>
<div class="canvas_menu_inner">
    <a href="#"> <img src="{% static "images/wb_menu_icon10.png" %}" width="37" height="20" alt="img"> </a>
    <div class="wb_submenu_icon1">
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_graphno" href="#"> <img src="{% static "images/white_board/wb_menu_icon10_1.png" %}" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_graphpage" href="#"> <img src="{% static "images/white_board/wb_menu_icon10_2.png" %}" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_graph4_1" href="#"> <img src="{% static "images/white_board/wb_menu_icon10_3.png" %}" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_graph4_2" href="#"> <img src="{% static "images/white_board/wb_menu_icon10_4.png" %}" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_graph2" href="#"> <img src="{% static "images/white_board/wb_menu_icon10_5.png" %}" alt="img"> </a> </div>
    </div>
</div>
<div class="canvas_menu_inner">
    <a href="#" id="id_menu_ic_fx"> <img src="{% static "images/wb_fx_icon.png" %}" alt="img"> </a>
    <div class="wb_submenu_icon whtebox_fx">
        <div class="wb_subsubmenu">
            <a href="#"> <img src="{% static "images/white_board/wb_menu_icon11_1.png" %}" alt="img"> </a>
            <div class="sub_icon">
                <a id="id_fx_wb_menu_icon11_1_inner1" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_1_inner1.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_1_inner2" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_1_inner2.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_1_inner3" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_1_inner3.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_1_inner4" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_1_inner4.png" %}" alt="img"> </a>
            </div>
        </div>
        <div class="wb_subsubmenu">
            <a href="#"> <img src="{% static "images/white_board/wb_menu_icon11_2.png" %}" alt="img"> </a>
            <div class="sub_icon">
                <a id="id_fx_wb_menu_icon11_2_inner1" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_2_inner1.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_2_inner2" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_2_inner2.png" %}" alt="img"> </a>
                <!-- <a id="id_fx_wb_menu_icon11_2_inner3" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_2_inner3.png" %}" alt="img"> </a> -->
                <a id="id_fx_wb_menu_icon11_2_inner4" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_2_inner4.png" %}" alt="img"> </a>
            </div>
        </div>
        <div class="wb_subsubmenu">
            <a href="#"> <img src="{% static "images/white_board/wb_menu_icon11_3.png" %}" alt="img"> </a>
            <div class="sub_icon">
                <a id="id_fx_wb_menu_icon11_3_inner1" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_3_inner1.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_3_inner2" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_3_inner2.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_3_inner3" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_3_inner3.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_3_inner4" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_3_inner4.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_3_inner5" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_3_inner5.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_3_inner6" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_3_inner6.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_3_inner7" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_3_inner7.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_3_inner8" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_3_inner8.png" %}" alt="img"> </a>
            </div>
        </div>
        <div class="wb_subsubmenu">
            <a href="#"> <img src="{% static "images/white_board/wb_menu_icon11_4.png" %}" alt="img"> </a>
            <div class="sub_icon">
                <a id="id_fx_wb_menu_icon11_4_inner1" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_4_inner1.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_4_inner2" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_4_inner2.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_4_inner3" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_4_inner3.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_4_inner4" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_4_inner4.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_4_inner5" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_4_inner5.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_4_inner6" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_4_inner6.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_4_inner7" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_4_inner7.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_4_inner8" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_4_inner8.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_4_inner9" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_4_inner9.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_4_inner10" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_4_inner10.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_4_inner11" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_4_inner11.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_4_inner12" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_4_inner12.png" %}" alt="img"> </a>
            </div>
        </div>
        <div class="wb_subsubmenu">
            <a href="#"> <img src="{% static "images/white_board/wb_menu_icon11_5.png" %}" alt="img"> </a>
            <div class="sub_icon">
                <a id="id_fx_wb_menu_icon11_5_inner1" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_5_inner1.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_5_inner2" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_5_inner2.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_5_inner3" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_5_inner3.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_5_inner4" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_5_inner4.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_5_inner5" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_5_inner5.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_5_inner6" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_5_inner6.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_5_inner7" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_5_inner7.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_5_inner8" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_5_inner8.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_5_inner9" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_5_inner9.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_5_inner10" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_5_inner10.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_5_inner11" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_5_inner11.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_5_inner12" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_5_inner12.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_5_inner13" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_5_inner13.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_5_inner14" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_5_inner14.png" %}" alt="img"> </a>
            </div>
        </div>
        <div class="wb_subsubmenu">
            <a href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6.png" %}" alt="img"> </a>
            <div class="sub_icon">
                <a id="id_fx_wb_menu_icon11_6_inner1" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner1.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner2" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner2.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner3" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner3.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner4" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner4.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner5" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner5.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner6" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner6.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner7" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner7.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner8" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner8.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner9" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner9.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner10" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner10.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner11" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner11.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner12" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner12.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner13" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner13.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner14" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner14.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner15" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner15.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner16" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner16.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner17" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner17.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner18" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner18.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner19" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner19.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner20" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner20.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner21" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner21.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner22" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner22.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner23" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner23.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner24" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner24.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner25" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner25.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner26" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner26.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner27" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner27.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner28" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner28.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner29" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner29.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_6_inner30" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_6_inner30.png" %}" alt="img"> </a>
            </div>
        </div>
        <div class="wb_subsubmenu">
            <a href="#"> <img src="{% static "images/white_board/wb_menu_icon11_7.png" %}" alt="img"> </a>
            <div class="sub_icon" id="seven">
            </div>
        </div>
        <div class="wb_subsubmenu">
            <a href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8.png" %}" alt="img"> </a>
            <div class="sub_icon">
                <a id="id_fx_wb_menu_icon11_8_inner1" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner1.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner2" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner2.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner3" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner3.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner4" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner4.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner5" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner5.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner6" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner6.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner7" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner7.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner8" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner8.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner9" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner9.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner10" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner10.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner11" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner11.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner12" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner12.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner13" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner13.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner14" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner14.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner15" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner15.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner16" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner16.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner17" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner17.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner18" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner18.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner19" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner19.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner20" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner20.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner21" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner21.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner22" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner22.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner23" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner23.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner24" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner24.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner25" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner25.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner26" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner26.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner27" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner27.png" %}"alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_8_inner28" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_8_inner28.png" %}" alt="img"> </a>
            </div>
        </div>
        <div class="wb_subsubmenu">
            <a href="#"> <img src="{% static "images/white_board/wb_menu_icon11_9.png" %}" alt="img"> </a>
            <div class="sub_icon">
                <a id="id_fx_wb_menu_icon11_9_inner1" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_9_inner1.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_9_inner2" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_9_inner2.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_9_inner3" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_9_inner3.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_9_inner4" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_9_inner4.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_9_inner5" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_9_inner5.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_9_inner6" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_9_inner6.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_9_inner7" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_9_inner7.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_9_inner8" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_9_inner8.png" %}" alt="img"> </a>
            </div>
        </div>
        <div class="wb_subsubmenu">
            <a href="#"> <img src="{% static "images/white_board/wb_menu_icon11_10.png" %}" alt="img"> </a>
            <div class="sub_icon">
                <a id="id_fx_wb_menu_icon11_10_inner1" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_10_inner1.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_10_inner2" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_10_inner2.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_10_inner3" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_10_inner3.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_10_inner4" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_10_inner4.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_10_inner5" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_10_inner5.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_10_inner6" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_10_inner6.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_10_inner7" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_10_inner7.png" %}" alt="img"> </a>
                <a id="id_fx_wb_menu_icon11_10_inner8" href="#"> <img src="{% static "images/white_board/wb_menu_icon11_10_inner8.png" %}" alt="img"> </a>
            </div>
        </div>
        <div class="wb_subsubmenu">
            <a href="#"> <img src="{% static "images/white_board/wb_menu_icon11_11.png" %}" alt="img"> </a>
            <div class="sub_icon" id="eleven">
            </div>
        </div>
        <div class="wb_subsubmenu">
            <a href="#"> <img src="{% static "images/white_board/wb_menu_icon11_12.png" %}" alt="img"> </a>
            <div class="sub_icon" id="twelve">
            </div>
        </div>
        <div class="wb_subsubmenu">
            <a href="#"> <img src="{% static "images/white_board/wb_menu_icon11_13.png" %}" alt="img"> </a>
            <div class="sub_icon" id="thirteen">
            </div>
        </div>
        <div class="wb_subsubmenu">
            <a href="#"> <img src="{% static "images/white_board/wb_menu_icon11_14.png" %}" alt="img"> </a>
            <div class="sub_icon" id="fourteen">
            </div>
        </div>
    </div>
</div>
<div class="canvas_menu_inner">
    <a href="#"> <img src="{% static "images/white_board/wb_menu_icon12.png" %}" alt="img"> </a>
    <div class="wb_submenu_icon1">
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_axis1" href="#"> <img src="{% static "images/white_board/wb_menu_icon12_1.png" %}" alt="img"> </a> </div>
        <div class="wb_subsubmenu"> <a id="id_canvas_menu_icon_axismarked" href="#"> <img src="{% static "images/white_board/wb_menu_icon12_2.png" %}" alt="img"> </a> </div>
    </div>
</div>
</div>
<div class="add"><img src="{% static "images/wb_upload_icon.png" %}" width="21" height="22" alt="icon">  Upload File
    <!--<input type="file" required="required" onchange=" checkFile(this);getElementById('filevalue').value = getElementById('file_upload').value;getElementById('filevalue').style.display='block'; " id="file_upload" title="Browse File" name="file1" value="Browse File" class="file radius" style="display:block;">!-->
    <input type="file" id="file_upload" title="Browse File" name="file1" value="Browse File" class="file radius" style="display:block;">
</div>
<div class="canvas_color">
    <a href="#" id="black"></a>
    <a href="#" id="orange"></a>
    <a href="#" id="sky_blue"></a>
    <a href="#" id="green"></a>
    <a href="#" id="yellow"></a>
    <a href="#" id="peach"></a>
    <a href="#" id="gray"></a>
</div>

</div>

<style type='text/css'>

      .code {
        padding-left:2em;
        font-family:monospace;
      }

      .formulaeditorinput {
        margin-right: 2em;
      }
      canvas.mathdoxformula{
         margin-top:140px;
         max-width: 800px;
      }
    </style>

<div id="id_canvas_tab" class="easyui-tabs" style="width:100%;float:left;">
    {% for drawingboard in drawingboards %}
        <div title="{{ drawingboard.numeric_id }}" id="id_canvas_tab_{{ drawingboard.numeric_id }}" data-options="closable:false">
            <div style="z-index:90;width: 100%;text-align:center;height:1600px;margin-top:1px;" class="text-center"><canvas id="drawing_board" width="100%" height="1600" tabindex = '1' style="-webkit-filter: drop-shadow(0 0 7px rgba(0,0,0,0.5));position:relative;top:0px;radius:2px;"></canvas>
                <div style="display:none;position:relative;top:70px;width: 800px;height:400px;margin-left:auto;margin-right:auto; margin-top: 0px;border: 2px solid #dedede; border-radius: 10px;background:#fdfdfd;padding-bottom: 70px;">
                    <button class="btn btn-success" id="id_button_fx_ok" style="position:absolute;top:3px;right:106px;width: 100px;">Ok</button>
                    <button class="btn btn-danger" id="id_button_fx_cancel" style="position:absolute;top:3px;right:3px;width: 100px;">Cancel</button>
                    <textarea id='formula1' class='mathdoxformula' rows='10' cols='80'>
                    </textarea>
                </div>
            </div>
        </div>
    {% endfor %}
</div>

<script>
    $(document).ready(function(){

        var canvas_tab_counter = 1;

        var canvas_element =  $("#id_canvas_tab_1").html(); //'<div style="z-index:90;width: 100%;text-align:center;height:1600px;margin-top:1px;" class="text-center"><canvas class="hidden_canvas_elms" id="drawing_board_'+canvas_tab_counter+'" width="100%" height="1600" tabindex = "1" style="-webkit-filter: drop-shadow(0 0 7px rgba(0,0,0,0.5));position:relative;top:0px;radius:2px;"></canvas>'
{#            canvas_element += '<div style="display:none;position:relative;top:70px;width: 800px;height:400px;margin-left:auto;margin-right:auto; margin-top: 0px;border: 2px solid #dedede; border-radius: 10px;background:#fdfdfd;padding-bottom: 70px;">'#}
{#            canvas_element += '<button class="btn btn-success" id="id_button_fx_ok" style="position:absolute;top:3px;right:106px;width: 100px;">Ok</button>'#}
{#            canvas_element += '<button class="btn btn-danger" id="id_button_fx_cancel" style="position:absolute;top:3px;right:3px;width: 100px;">Cancel</button>'#}
{#            canvas_element += '</div>'#}
            //canvas_element += '</div>';

        function resetTabs(){
            var all_tabs = $("[id^=id_canvas_tab_]");
            for(var i = 0 ; i < all_tabs.length ; i++){
                //console.log(all_tabs[i]);
                $(all_tabs[i]).html("");
            }
        }

        function renderDrawingboard(tab_id){

            $("#id_canvas_tab_"+tab_id).html(canvas_element);

            var drawingCanvas = document.getElementById("drawing_board");

            /* Rresize the canvas to occupy the full page,
             by getting the widow width and height and setting it to canvas*/
            drawingCanvas.width  = window.innerWidth;
            drawingCanvas.height = "1600";

            whiteboard.Init(true);
        }

        $('#id_canvas_tab').tabs({
            onSelect: function(title,index){
                resetTabs();
                renderDrawingboard(index+1);
            },
            onUnselect: function(title,index){

            },
            onBeforeClose: function(title){
                return confirm('Are you sure you want to close ' + title);
            },
            onClose: function(title){

            },
            onAdd: function(title){

            },
            onUpdate: function(title){

            }
        });

        $("#id_canvas_add_button").click(function(e){

            $.ajax({
                type: "GET",
                url: "ajax/action_whiteboard_tab",
                data: { action: "ADD_DRAWING_BOARD" },
                success: function(data)
                {
                    data = jQuery.parseJSON(data);
                    console.log(data.data);
                    resetTabs();
                    $('#id_canvas_tab').tabs('add',{
                        title:data.data.tab_count,
                        id: "id_canvas_tab_"+data.data.tab_count,
                        content: canvas_element,
                        closable:false
                    });
                    var drawingCanvas = document.getElementById("drawing_board");

                    /* Rresize the canvas to occupy the full page,
                     by getting the widow width and height and setting it to canvas*/
                    drawingCanvas.width  = window.innerWidth;
                    drawingCanvas.height = "1600";

                    whiteboard.Init(true);

                    console.log("Canvas tab added.");
                },
                error: function(jqxhr, status, error)
                {
                    console.log("An error occured while adding canvas tab. Error message: "+error);
                }
            })
            .done(function( msg ) {

            });

        });

        //Make the canvas full width.
        // Get the canvas element form the page
        var drawingCanvas = document.getElementById("drawing_board");
         
        /* Rresize the canvas to occupy the full page, 
           by getting the widow width and height and setting it to canvas*/
            drawingCanvas.width  = window.innerWidth;
            drawingCanvas.height = "1600";

        // var mathdoxformula = document.getElementsByClassName("mathdoxformula");
        // mathdoxformula[0].width  ="15px";
        // mathdoxformula[0].height = "25px";

        //ui-tabs-panel ui-widget-content ui-corner-bottom
        $(".ui-tabs-panel").css("padding","0px");

        var i=0;
        var c='';
        for(i=1;i<=48;i++)
        {
            var path = {% static "" %} + "images/white_board/wb_menu_icon11_7_inner"+i+".png";
            c+='<a id="id_fx_wb_menu_icon11_7_inner'+i+'" href="#"> <img src=' + path + ' alt="img"> </a>';
        }
        document.getElementById('seven').innerHTML=c;
    });
</script>
<script>
    $(document).ready(function(){
        var i=0;
        var c='';
        for(i=1;i<=153;i++)
        {
            var path = {% static "" %} + "images/white_board/wb_menu_icon11_11_inner"+i+".png";
            c+='<a id="id_fx_wb_menu_icon11_11_inner'+i+'" href="#"> <img src=' + path + ' alt="img"> </a>';
        }
        document.getElementById('eleven').innerHTML=c;
    });
</script>
<script>
    $(document).ready(function(){
        var i=0;
        var c='';
        for(i=1;i<=46;i++)
        {
            var path = {% static "" %} + "images/white_board/wb_menu_icon11_12_inner"+i+".png";
            c+='<a id="id_fx_wb_menu_icon11_12_inner'+i+'" href="#"> <img src='+ path +' alt="img"> </a>';
        }
        document.getElementById('twelve').innerHTML=c;
    });
</script>
<script>
    $(document).ready(function(){
        var i=0;
        var c='';
        for(i=1;i<=54;i++)
        {
            var path = {% static "" %} + "images/white_board/wb_menu_icon11_13_inner"+i+".png";
            c+='<a id="id_fx_wb_menu_icon11_13_inner'+i+'" href="#"> <img src='+ path +' alt="img"> </a>';
        }
        document.getElementById('thirteen').innerHTML=c;
    });
</script>
<script>
    $(document).ready(function(){
        var i=0;
        var c='';
        for(i=1;i<=70;i++)
        {
            var path = {% static "" %} + "images/white_board/wb_menu_icon11_14_inner"+i+".png";
            c+='<a id="id_fx_wb_menu_icon11_14_inner'+i+'" href="#"> <img src='+ path +' alt="img"> </a>';
        }
        document.getElementById('fourteen').innerHTML=c;
    });
</script>

<script>
    //$(".canvas_menu_inner > a").click(function () {
    //   $(".canvas_menu_inner > a").removeClass("menu_active");
    //   $(this).toggleClass("menu_active");
    //   $(".wb_submenu_icon").removeClass("addactive");
    //   if ($('.canvas_menu_inner > a').has("menu_active"))
    //   {
    //      $(this).siblings(".wb_submenu_icon").addClass("addactive");
    //   }
    //});


    var whiteboard_fx = {
        show_whiteboard: function(bool){
            // this.fx_img_init();
            // this.fx_canvas.putImageData(this.reset_fx_img_val,0,0);
            if(bool === true){
                $("#drawing_board").parent().css("background","white");
                $("#drawing_board").show();
                $("#formula1").parent().hide();
            }
            else{
                $("#drawing_board").parent().css("background","#dedede");
                $("#drawing_board").hide();
                $("#formula1").parent().show();
            }
        },
        get_fx_image: function(){
            var this_canvas = $(".mathdoxformula")[0];
            return this_canvas.getContext('2d').getImageData(0,0,this_canvas.width,this_canvas.height);
         }
    }

    $(function(){

        $(".canvas_menu_inner > a").click(function(e){
            e.stopPropagation();
            if($(e.target).parent().attr("id") == "id_menu_ic_fx"){
                deselect_tools();
                whiteboard.selected_tool = whiteboard.tools.FX_TOOL();
                whiteboard_fx.show_whiteboard(false);
            }
            else{
                whiteboard_fx.show_whiteboard(true);
            }

            $(this).parent().siblings('.canvas_menu_inner').children('.canvas_menu_inner > a').removeClass("menu_active");
            $(this).toggleClass("menu_active");

            $(this).parent().siblings('.canvas_menu_inner').children('.wb_submenu_icon,.wb_submenu_icon1').removeClass("addactive");
            $(this).siblings(".wb_submenu_icon,.wb_submenu_icon1").toggleClass("addactive");


            $("body").click(function(e){
                if(e.target.id != "dropdown")
                {
                    $(".canvas_menu_inner > a").removeClass("menu_active");
                    $(".wb_submenu_icon,.wb_submenu_icon1").removeClass("addactive");
                    $('.sub_icon').removeClass("addactive");
                    $('.wb_subsubmenu > a').removeClass("hover_bg");
                    $("body").unbind("click");
                }
            });

            if($(e.target).parent().attr("id") == "id_canvas_menu_icon_text"){
                whiteboard.Init();
                deselect_tools();
                var text_tool = whiteboard.tools.Text();
                whiteboard.selected_tool = text_tool;
                whiteboard.canvas_data_bfr_drawng_start = whiteboard.context.getImageData(0,0,whiteboard.canvas.width,whiteboard.canvas.height);
                return false;
            }
            else if($(e.target).parent().attr("id") == "id_canvas_menu_icon_select"){
                whiteboard.Init();
                $("#drawing_board").css('cursor','auto');
                deselect_tools();
                $("#id_canvas_menu_icon_select").addClass('menu_active');
                var select_tool = whiteboard.tools.Select();
                whiteboard.selected_tool = select_tool;
                console.log("Tool Selected: "+select_tool.name);
                whiteboard.canvas_data_bfr_drawng_start = whiteboard.context.getImageData(0,0,whiteboard.canvas.width,whiteboard.canvas.height);
                return false;

            }
            else if($(e.target).parent().attr("id") == "id_canvas_menu_icon_redo"){
                whiteboard.Init();
                deselect_tools();
                $("#id_canvas_menu_icon_redo").addClass('menu_active');
                whiteboard.selected_tool = whiteboard.tools.Redo();

                /*var last_drawn_canvas_data = whiteboard.canvas_data_undo_array.pop();
                if(last_drawn_canvas_data != undefined)
                {
                    whiteboard.canvas_data_array.push(last_drawn_canvas_data);
                    whiteboard.context.putImageData(last_drawn_canvas_data,0,0);
                }*/

                //console.log("Before redo... objects count: "+whiteboard.canvas_data_stack.length);
                if(whiteboard.canvas_data_stack_redo.length >= 1)
                {
                    var last_undo_object = whiteboard.canvas_data_stack_redo[whiteboard.canvas_data_stack_redo.length - 1];
                    whiteboard.canvas_data_stack_redo = whiteboard.canvas_data_stack_redo.slice(0, whiteboard.canvas_data_stack_redo.length - 1);
                    whiteboard.canvas_data_stack.push(last_undo_object);
                    //console.log("After redo... objects count: "+whiteboard.canvas_data_stack.length);
                    whiteboard.drawing_action.redraw();
                }
                return false;
            }
            else if($(e.target).parent().attr("id") == "id_canvas_menu_icon_undo"){
                    whiteboard.Init();
                    deselect_tools();
                    $("#id_canvas_menu_icon_undo").addClass('menu_active');
                    whiteboard.selected_tool = whiteboard.tools.Undo();

                    //console.log(whiteboard.canvas_data_array.length);

                    /*whiteboard.canvas_data_stack is the main stack which holds all drawing objects. And when a drawing has been undoed
                    * it is placing into the whiteboard.canvas_data_stack_redo */

                    //console.log("Stack status now: ");
                    //console.log("Stack Size: "+ whiteboard.canvas_data_stack.length);
                    for(var i =0; i  < whiteboard.canvas_data_stack.length ; i++)
                    {
                        //console.log("Object: "+ i);
                        //console.log(whiteboard.canvas_data_stack[i].points);
                    }

                    //console.log("Before undo... objects count: "+whiteboard.canvas_data_stack.length);
                    if(whiteboard.canvas_data_stack.length >= 1)
                    {
                        var last_drawn_object = whiteboard.canvas_data_stack[whiteboard.canvas_data_stack.length - 1];
                        whiteboard.canvas_data_stack = whiteboard.canvas_data_stack.slice(0,whiteboard.canvas_data_stack.length - 1);
                        whiteboard.canvas_data_stack_redo.push(last_drawn_object);
                        //console.log("After undo... objects count: "+whiteboard.canvas_data_stack.length);
                        whiteboard.drawing_action.redraw();
                    }
                    return false;
            }
            else if($(e.target).parent().attr("id") == "id_canvas_menu_icon_clearboard"){
                //Clear the canvas.
                whiteboard.canvas_data_stack = [];
                //console.log("After redo... objects count: "+whiteboard.canvas_data_stack.length);
                whiteboard.drawing_action.redraw();
            }
            return false;
        });
    });

    $(".wb_submenu_icon").click(function () {
        return false;
    });

    $(".canvas_menu_inner > a").mouseover(function(e){
            e.stopPropagation();
            if(whiteboard.selected_tool.name == "FX"){
                $(this).parent().siblings('.canvas_menu_inner').children('.canvas_menu_inner > a').removeClass("menu_active");
                    $(this).toggleClass("menu_active");

                    $(this).parent().siblings('.canvas_menu_inner').children('.wb_submenu_icon,.wb_submenu_icon1').removeClass("addactive");
                    $(this).siblings(".wb_submenu_icon,.wb_submenu_icon1").toggleClass("addactive");

                    $("body").click(function(e){
                        if(e.target.id != "dropdown")
                        {
                            $(".canvas_menu_inner > a").removeClass("menu_active");
                            $(".wb_submenu_icon,.wb_submenu_icon1").removeClass("addactive");
                            $('.sub_icon').removeClass("addactive");
                            $('.wb_subsubmenu > a').removeClass("hover_bg");
                            $("body").unbind("click");
                        }
                    });
            }
            else{
                whiteboard_fx.show_whiteboard(true);
            }
    });

    $(".wb_subsubmenu").hover(function () {
        $(this).siblings('.wb_subsubmenu').children('.sub_icon').removeClass("addactive");
        $('.sub_icon',this).addClass("addactive");
        $(this).siblings('.wb_subsubmenu').children('.wb_subsubmenu > a').removeClass("hover_bg");

        $('a',this).addClass("hover_bg");
        $('.sub_icon.addactive > a').removeClass("hover_bg");
    });
    $(".sub_icon.addactive").click(function () {
        return true;
    });

    var hide_menu = function(){
        $('.canvas_menu_inner > a').removeClass("menu_active");
        $('.sub_icon,.wb_submenu_icon').removeClass("addactive");
    };

    

    var fxboard = {
        show_alert: function(title,msg){
                      
            // $.colorbox({html:html, fixed:true, initialWidth: '400px', initialHeight: '170px', width:'400px', height:'170px', escKey: false, overlayClose: false,fixed:true});
            // $("#cboxOverlay").hide();
            notification_dialog(title,msg);

        },
        palette_layout: ""+
            "<OMOBJ version='2.0' xmlns='http://www.openmath.org/OpenMath'>\n"+
            "  <OMA>\n"+
            "    <OMS cd='editor1' name='palette'/>\n"+
            "    <OMA>\n"+
            "      <OMS cd='editor1' name='palette_tab'/>\n"+
            //Palette Row 0
            "      <OMA>\n"+
            "        <OMS cd='editor1' name='palette_row'/>\n"+
            "        <OMS cd='arith1' name='plus'/>\n"+
            "        <OMS cd='arith1' name='minus'/>\n"+
            "        <OMS cd='arith1' name='times'/>\n"+
            "        <OMS cd='logic1' name='and'/>\n"+
            "        <OMS cd='logic1' name='or'/>\n"+
            "        <OMA>\n"+
            "          <OMS cd='transc1' name='cos'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='arith1' name='root'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "          <OMI>2</OMI>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd=\"calculus1\" name=\"int\"/>\n"+
            "          <OMBIND>\n"+
            "            <OMS cd=\"fns1\" name=\"lambda\"/>\n"+
            "            <OMBVAR>\n"+
            "              <OMV name=\"x\"/>\n"+
            "            </OMBVAR>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "          </OMBIND>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd=\"calculus1\" name=\"defint\"/>\n"+
            "          <OMA>\n"+
            "            <OMS cd=\"interval1\" name=\"interval\"/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "          </OMA>\n"+
            "          <OMBIND>\n"+
            "            <OMS cd=\"fns1\" name=\"lambda\"/>\n"+
            "            <OMBVAR>\n"+
            "              <OMV name=\"x\"/>\n"+
            "            </OMBVAR>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "          </OMBIND>\n"+
            "        </OMA>\n"+
            "        <OMS cd='editor1' name='palette_whitespace'/>\n"+
            "        <OMA>\n"+
            "          <OMS cd='interval1' name='interval_cc'/>\n"+
            "     <OMS cd='editor1' name='input_box'/>\n"+
            "     <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "      </OMA>\n"+
            //Palette Row 1
            "      <OMA>\n"+
            "        <OMS cd='editor1' name='palette_row'/>\n"+
            "        <OMS cd='relation1' name='lt'/>\n"+
            "        <OMS cd='relation1' name='leq'/>\n"+
            "        <OMS cd='relation1' name='eq'/>\n"+
            "        <OMS cd='relation1' name='geq'/>\n"+
            "        <OMS cd='relation1' name='gt'/>\n"+
            "        <OMA>\n"+
            "          <OMS cd='transc1' name='sin'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='arith1' name='root'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd=\"arith1\" name=\"product\"/>\n"+
            "          <OMA>\n"+
            "            <OMS cd=\"interval1\" name=\"integer_interval\"/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "          </OMA>\n"+
            "          <OMBIND>\n"+
            "            <OMS cd=\"fns1\" name=\"lambda\"/>\n"+
            "            <OMBVAR>\n"+
            "              <OMV name=\"n\"/>\n"+
            "            </OMBVAR>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "          </OMBIND>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd=\"arith1\" name=\"sum\"/>\n"+
            "            <OMA>\n"+
            "              <OMS cd=\"interval1\" name=\"integer_interval\"/>\n"+
            "              <OMS cd='editor1' name='input_box'/>\n"+
            "              <OMS cd='editor1' name='input_box'/>\n"+
            "            </OMA>\n"+
            "          <OMBIND>\n"+
            "            <OMS cd=\"fns1\" name=\"lambda\"/>\n"+
            "            <OMBVAR>\n"+
            "              <OMV name=\"n\"/>\n"+
            "            </OMBVAR>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "          </OMBIND>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='linalg1' name='determinant'/>\n"+
            "     <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='interval1' name='interval_co'/>\n"+
            "     <OMS cd='editor1' name='input_box'/>\n"+
            "     <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "      </OMA>\n"+
            //Palette Row 2
            "      <OMA>\n"+
            "        <OMS cd='editor1' name='palette_row'/>\n"+
            "        <OMS cd='nums1' name='pi'/>\n"+
            "        <OMS cd='nums1' name='e'/>\n"+
            "        <OMS cd='nums1' name='i'/>\n"+
            "        <OMS cd='nums1' name='infinity'/>\n"+
            "        <OMS cd='editor1' name='palette_whitespace'/>\n"+
            "        <OMA>\n"+
            "          <OMS cd='transc1' name='tan'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='list1' name='list'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='linalg2' name='vector'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='linalg2' name='matrix'/>\n"+
            "          <OMA>\n"+
            "            <OMS cd='linalg2' name='matrixrow'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "          </OMA>\n"+
            "          <OMA>\n"+
            "            <OMS cd='linalg2' name='matrixrow'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "          </OMA>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='linalg2' name='matrix'/>\n"+
            "          <OMA>\n"+
            "            <OMS cd='linalg2' name='matrixrow'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "          </OMA>\n"+
            "          <OMA>\n"+
            "            <OMS cd='linalg2' name='matrixrow'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "          </OMA>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='interval1' name='interval_oc'/>\n"+
            "     <OMS cd='editor1' name='input_box'/>\n"+
            "     <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "      </OMA>\n"+
            //Palette Row 3
            "      <OMA>\n"+
            "        <OMS cd='editor1' name='palette_row'/>\n"+
            "        <OMA>\n"+
            "          <OMS cd='arith1' name='divide'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='arith1' name='power'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='arith1' name='abs'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='integer1' name='factorial'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='arith1' name='power'/>\n"+
            "          <OMS cd='nums1' name='e'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='transc1' name='ln'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='transc1' name='log'/>\n"+
            "          <OMI>10</OMI>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='linalg2' name='vector'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='linalg2' name='matrix'/>\n"+
            "          <OMA>\n"+
            "            <OMS cd='linalg2' name='matrixrow'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "          </OMA>\n"+
            "          <OMA>\n"+
            "            <OMS cd='linalg2' name='matrixrow'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "          </OMA>\n"+
            "          <OMA>\n"+
            "            <OMS cd='linalg2' name='matrixrow'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "          </OMA>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='linalg2' name='matrix'/>\n"+
            "          <OMA>\n"+
            "            <OMS cd='linalg2' name='matrixrow'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "          </OMA>\n"+
            "          <OMA>\n"+
            "            <OMS cd='linalg2' name='matrixrow'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "          </OMA>\n"+
            "          <OMA>\n"+
            "            <OMS cd='linalg2' name='matrixrow'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "          </OMA>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "          <OMS cd='interval1' name='interval_oo'/>\n"+
            "     <OMS cd='editor1' name='input_box'/>\n"+
            "     <OMS cd='editor1' name='input_box'/>\n"+
            "        </OMA>\n"+
            "      </OMA>\n"+
            //Palette 4
            "      <OMA>\n"+
            "        <OMS cd='editor1' name='palette_row'/>\n"+
            "        <OMA>\n"+
            "          <OMS cd='arith1' name='root'/>\n"+
            "          <OMS cd='editor1' name='input_box'/>\n"+
            "          <OMI>3</OMI>\n"+
            "        </OMA>\n"+
            "        <OMA>\n"+
            "           <OMS cd='arith1' name='lcm'/>\n"+
            "           <OMV name='a'/>"+
            "           <OMV name='b'/>"+
            "        </OMA>"+
            "        <OMA>\n"+
            "          <OMS cd=\"calculus1\" name=\"int\"/>\n"+
            "          <OMBIND>\n"+
            "            <OMS cd=\"fns1\" name=\"lambda\"/>\n"+
            "            <OMBVAR>\n"+
            "              <OMV name=\"x\"/>\n"+
            "            </OMBVAR>\n"+
            "            <OMS cd='editor1' name='input_box'/>\n"+
            "          </OMBIND>\n"+
            "        </OMA>\n"+
            "      </OMA>\n"+

            "    </OMA>\n"+
            "  </OMA>\n"+
            "</OMOBJ>\n"+
              "",
        draw_formula: function(row,col){
            var editor = org.mathdox.formulaeditor.FormulaEditor.getFocusedEditor();
            if(editor == null || editor == "undefined"){
                this.show_alert("Select canvas first","<p style='text-align:left;'>Please select the canvas to draw formula on it.</p>");
                return false;
            }
            var palette = new org.mathdox.formulaeditor.Palette();
            var presentation = palette.parseXMLPalette(this.palette_layout);
            var pTabContainer = palette.presentation.children[0];

            var redrawFunction = function() {
                  palette.redraw();
            };
            
            var row = palette.semantics.operands[0].operands[row].operands[col];
            var presentation = org.mathdox.formulaeditor.presentation;
            var rowPresentation = new presentation.Row(row.getPresentation(palette.getPresentationContext()));
            console.log(row.getPresentation(palette.getPresentationContext()));
            rowPresentation.flatten();
            var position = editor.cursor.position;
            var moveright;
            if (rowPresentation.children) {
            for (var i=0;i<rowPresentation.children.length;i++) {

                moveright = position.row.insert(position.index, 
                  rowPresentation.children[i], (i === 0));
                if (moveright) {
                  position.index++;
                }
              }
            } else {
              moveright = position.row.insert(
              position.index, rowPresentation, true);

              if (moveright) {
                position.index++;
              }
            }
            editor.redraw();
            editor.save();
            editor.focus();
            
            window.focus();
          return false;
        }
    };

    $(".sub_icon > a").mousedown(function (e) {
       var anchor_elem = $(e.target).parent();
       var anchor_id = anchor_elem.attr("id");
       if(anchor_id == "id_fx_wb_menu_icon11_1_inner1"){
            fxboard.draw_formula(3,0);
       }
       else if(anchor_id == "id_fx_wb_menu_icon11_2_inner1"){
            fxboard.draw_formula(0,6);    
       }
       else if(anchor_id == "id_fx_wb_menu_icon11_2_inner2"){
            fxboard.draw_formula(1,6);
       }
       else if(anchor_id == "id_fx_wb_menu_icon11_2_inner4"){
            fxboard.draw_formula(4,1);
       }
       else if(anchor_id == "id_fx_wb_menu_icon11_3_inner1"){
            fxboard.draw_formula(3,1);
       }
       else if(anchor_id == "id_fx_wb_menu_icon11_4_inner1"){
            fxboard.draw_formula(0,7);
       }
       else if(anchor_id == "id_fx_wb_menu_icon11_4_inner2"){
            fxboard.draw_formula(0,8);
       }
       else if(anchor_id == "id_fx_wb_menu_icon11_4_inner3"){
            fxboard.draw_formula(4,3);
       }
       else if(anchor_id == "id_fx_wb_menu_icon11_7_inner8"){
            fxboard.draw_formula(0,5);
       }
       else if(anchor_id == "id_fx_wb_menu_icon11_11_inner1"){
            fxboard.draw_formula(0,0);
       }
       else if(anchor_id == "id_fx_wb_menu_icon11_11_inner2"){
            fxboard.draw_formula(0,1);
       }
       else if(anchor_id == "id_fx_wb_menu_icon11_11_inner10"){
            fxboard.draw_formula(0,2);
       }
       else if(anchor_id == "id_fx_wb_menu_icon11_11_inner17"){
            fxboard.draw_formula(0,3);
       }
       else if(anchor_id == "id_fx_wb_menu_icon11_11_inner18"){
            fxboard.draw_formula(0,4);
       }
       hide_menu();
       return false;
    });

    $("#id_button_fx_ok").click(function(e){
        var drawn_fx = whiteboard_fx.get_fx_image();
        whiteboard.Init();
        whiteboard.drawing_action.draw_fx_formula(drawn_fx);
        whiteboard_fx.show_whiteboard(true);
    });

    $("#id_button_fx_cancel").click(function(e){
        whiteboard_fx.show_whiteboard(true);
    });

</script>